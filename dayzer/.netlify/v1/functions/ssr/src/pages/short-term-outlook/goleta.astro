---
import Layout from '../../layouts/Layout.astro';
import GoleteaPage from '../../components/GoleteaPage';

// Define sub-navigation for Short Term Outlook
const subNavLinks: Array<{ label: string; href?: string; dropdown?: Array<{ label: string; href: string; description?: string }> }> = [
  { 
    label: 'CAISO Forecast',
    dropdown: [
      { label: 'CAISO System', href: '/short-term-outlook/caiso-system', description: 'System-wide fundamentals and forecasts' },
      { label: 'Goleta', href: '/short-term-outlook/goleta', description: 'Location-specific pricing and congestion analysis' },
    ]
  },
  { label: 'Weekly Insight', href: '/short-term-outlook/weekly-insight' },
  { label: 'Likeday Tool', href: '/short-term-outlook/likeday' },
];
---
<Layout title="Goleta Node" pageTitle="Short Term Outlook" subNavLinks={subNavLinks}>
  <GoleteaPage client:load />
  
  <script>
    // Handle anchor scroll after page load
    document.addEventListener('DOMContentLoaded', () => {
      // Check if there's a hash in the URL
      if (window.location.hash) {
        // Wait longer for all React components to fully render (especially charts)
        setTimeout(() => {
          const element = document.getElementById(window.location.hash.substring(1));
          if (element) {
            element.scrollIntoView({ behavior: 'smooth', block: 'start' });
            // Second scroll after additional delay to ensure it stays
            setTimeout(() => {
              element.scrollIntoView({ behavior: 'smooth', block: 'start' });
              // Third scroll for good measure
              setTimeout(() => {
                element.scrollIntoView({ behavior: 'smooth', block: 'start' });
              }, 1000);
            }, 1000);
          }
        }, 2000);
      }
    });
  </script>
</Layout>